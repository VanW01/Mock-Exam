<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Mock Exam Registration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .spinner {
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top: 3px solid white;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-100 min-h-screen py-12 px-4 sm:px-6 lg:px-8">

    <div class="max-w-2xl mx-auto">
        <div class="text-center mb-10">
            <h1 class="text-3xl font-extrabold text-gray-900 sm:text-4xl">2026 Mock Exam Registration</h1>
            <p class="mt-4 text-lg text-gray-600">Please select your preferred session.</p>
        </div>

        <div id="mainCard" class="bg-white rounded-2xl shadow-xl overflow-hidden fade-in">
            <div class="bg-indigo-600 p-4 text-white flex items-center gap-2">
                <span class="font-medium">Session Selection</span>
            </div>

            <form id="examForm" class="p-8 space-y-8">
                <div id="errorMessage" class="hidden bg-red-50 text-red-700 p-4 rounded-lg">
                    <p class="text-sm">Submission failed. Please try again.</p>
                </div>

                <div class="space-y-5">
                    <h3 class="text-lg font-semibold text-gray-900 border-b pb-2">Student Details</h3>
                    <div class="grid grid-cols-1 gap-5">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                            <input type="text" name="StudentName" required class="w-full rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="Student Name">
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input type="email" name="Email" required class="w-full rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="email@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                <input type="tel" name="Phone" required class="w-full rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="Phone Number">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-6 pt-2">
                    <h3 class="text-lg font-semibold text-gray-900 border-b pb-2">Exam Session</h3>
                    <div>
                        <label class="block text-sm font-bold text-gray-800 mb-3">Select Primary Session <span class="text-red-500">*</span></label>
                        <div class="grid grid-cols-1 gap-3" id="sessionContainer"></div>
                    </div>
                    <div class="bg-gray-50 p-5 rounded-xl border border-gray-200">
                        <label class="block text-sm font-bold text-gray-800 mb-2">Second Choice (Backup)</label>
                        <select name="SecondChoice" class="w-full rounded-lg border border-gray-300 p-3 outline-none bg-white">
                            <option value="None">-- Select a backup day --</option>
                            <option value="Mon">Mon</option>
                            <option value="Tue">Tue</option>
                            <option value="Wed">Wed</option>
                            <option value="Thu">Thu</option>
                            <option value="Fri">Fri</option>
                            <option value="Sat">Sat</option>
                            <option value="Sun">Sun</option>
                        </select>
                    </div>
                </div>

                <div class="pt-4">
                    <button type="submit" id="submitBtn" class="w-full flex items-center justify-center py-4 px-6 border border-transparent rounded-xl shadow-md text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-all">
                        <span id="btnText">Confirm Registration</span>
                        <div id="btnSpinner" class="spinner hidden ml-2"></div>
                    </button>
                </div>
            </form>
        </div>

        <div id="successCard" class="hidden bg-white max-w-md w-full rounded-2xl shadow-xl overflow-hidden mx-auto fade-in">
            <div class="bg-green-600 p-6 text-center">
                <h2 class="text-2xl font-bold text-white">Registration Received!</h2>
            </div>
            <div class="p-8 space-y-4 text-center">
                <p class="text-gray-600">Thank you for registering.</p>
                <button onclick="location.reload()" class="w-full mt-6 bg-gray-900 text-white py-3 rounded-lg font-semibold hover:bg-gray-800">Register Another</button>
            </div>
        </div>
    </div>

    <script>
        // UPDATED URL FROM YOUR PROMPT
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxArvug6Vs9KHz9E8aJT5MOfgexYtvPGYyXmGJatZJh3HNSQWpGTIfPojmKpP-g6KRbsg/exec";
        
        const EXAM_SESSIONS = [
            '2月6日 (五)｜09:30 - 17:00',
            '2月7日 (六)｜10:30 - 18:00',
            '2月8日 (日)｜10:30 - 18:00',
            '2月9日 (一)｜09:30 - 17:00'
        ];

        const sessionContainer = document.getElementById('sessionContainer');
        EXAM_SESSIONS.forEach((session) => {
            const label = document.createElement('label');
            label.className = "relative flex items-center p-4 cursor-pointer rounded-xl border-2 border-gray-200 hover:border-indigo-300 hover:bg-gray-50 transition-all duration-200";
            label.innerHTML = `
                <input type="radio" name="FirstChoice" value="${session}" required class="w-5 h-5 text-indigo-600 border-gray-300 focus:ring-indigo-500 peer">
                <div class="ml-3 flex-1"><span class="block text-base font-medium text-gray-900">${session}</span></div>
            `;
            label.querySelector('input').addEventListener('change', function() {
                document.querySelectorAll('#sessionContainer label').forEach(l => {
                    l.classList.remove('border-indigo-600', 'bg-indigo-50');
                    l.classList.add('border-gray-200');
                });
                if(this.checked) {
                    label.classList.remove('border-gray-200');
                    label.classList.add('border-indigo-600', 'bg-indigo-50');
                }
            });
            sessionContainer.appendChild(label);
        });

        const form = document.getElementById('examForm');
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btnText');
        const btnSpinner = document.getElementById('btnSpinner');
        const mainCard = document.getElementById('mainCard');
        const successCard = document.getElementById('successCard');
        const errorMessage = document.getElementById('errorMessage');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            submitBtn.disabled = true;
            btnText.textContent = 'Processing...';
            btnSpinner.classList.remove('hidden');
            errorMessage.classList.add('hidden');

            const formData = new FormData(form);

            try {
                await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    body: formData,
                    mode: 'no-cors' 
                });
                await new Promise(resolve => setTimeout(resolve, 1000));
                mainCard.classList.add('hidden');
                successCard.classList.remove('hidden');
            } catch (error) {
                console.error("Error:", error);
                errorMessage.classList.remove('hidden');
                submitBtn.disabled = false;
                btnText.textContent = 'Confirm Registration';
                btnSpinner.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
